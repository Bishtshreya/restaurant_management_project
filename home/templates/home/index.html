{% load static %}
{% load tz %}
<!DOCTYPE html>
<html>
    <head>
        <title>{{ restaurant_name }}</title>
        <link rel="stylesheet" href="{% static 'style.css' %}">
        <style>
            /* Breadcrumb styles */
            .breadcrumbs {
                margin: 15px 0;
                padding: 8px 12px;
                background: #f5f5f5;
                border-radius: 6px;
                font-size: 0.95rem;
            }
            .breadcrumbs a {
                text-decoration: none;
                color: #007bff;
            }
            .breadcrumbs a:hover {
                text-decoration: underline;
            }
            .breadcrumbs span {
                color: #555;
                margin: 0 5px;
            }
            /* Date & Time section */
            .datetime {
                margin: 20px 0;
                padding: 10px;
                background: #f9f9f9;
                border-left: 4px solid #007bff;
                font-size: 1rem;
                color: #333;
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <header>
            
            <!-- Logo -->
            <div>
                {% if restaurant_location and restaurant_location.logo %}
                    <img src="{{ restaurant_location.logo.url }}" alt="Restaurant Logo" style="max-height:120px;">
                {% else %}
                    <img src="{% static 'images/logo.png' %}" alt="Default Restaurant Logo" style="max-height:120px;">
                {% endif %}
            </div>
           
            <!-- Restaurant Name -->
            <h1>{{ restaurant_name }}</h1>

            <!-- Phone Number -->
            {% if phone_number %}
            <div class="phone-number">
                Call Us: <strong>{{ phone_number }}</strong>
            </div>
            {% endif %}

            <!--Welcome Message-->
            <p class="welcome-message">Serving happiness on every plate - where taste meets tradition!</p>

            <!-- Navigation -->
            <nav>
                <a href="/">Home</a>
                <a href="{% url 'about' %}">About Us</a>
                <a href="{% url 'faq' %}">FAQ</a>
                <a href="#">Cart ({{ cart_count}})</a>
                <a href="{% url 'feedback' %}">Feedback</a> 
            </nav>
        </header>

        <!-- Breadcrumbs -->
        <nav class="breadcrumbs">
            <a href="/">Home</a>
            {% if request.resolver_match.url_name == "about" %}
                <span>&gt;</span> <span>About Us</span>
            {% elif request.resolver_match.url_name == "cart" %}
                <span>&gt;</span> <span>Cart</span>
            {% endif %}
        </nav>
        
        <main>
            <!-- Hero Section -->
            <section class="hero">
                <img src="{% static 'images/hero-dish.jpg' %}" alt="Signature Dish" class="hero-image">
                <div class="hero-text">
                    <h2>Welcome to {{ restaurant_name }}</h2>
                    <p>Delicious food, cozy atmosphere, and unforgettable taste!</p>
                </div>
            </section>

            <h2>Welcome to {{ restaurant_name }}</h2>
            <p>Best food in town!</p>

            <!--  Order Now Button -->
            <div class="order-now">
                <a href="{% url 'order' %}" class="order-btn">Order Now</a>
            </div>

            <!--Food Gallery -->
            <section class="featured">
                <h2>Our Specials</h2>
                <div class="gallery">
                    <img src="{% static 'images/food1.jpg' %}" alt="Dish 1">
                    <img src="{% static 'images/food2.jpg' %}" alt="Dish 2">
                    <img src="{% static 'images/food3.jpg' %}" alt="Dish 3">
                </div>
            </section>

            <!--  Login Form Section -->
            {% if not request.user.is_authenticated %}
            <section id="login">
                <h3>Login</h3>
                <form method="post" action="{% url 'login' %}">
                    {% csrf_token %}
                    <input type="text" name="username" placeholder="Username" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit">Login</button>
                </form>
            </section>
            {% else %}
            <p>Welcome back, {{ request.user.username }}!
                <a href="{% url 'logout' %}">Logout</a>
            </p>
            {% endif %}
            <!--  End Login Form -->

            <!-- Current Date and Time -->
            <div class="datetime">
                Today is {% now "l, F j, Y" %} <br>
                Current Time: {% now "h:i A" %}
            </div>

            <!--  Restaurant Phone Number -->
            {% if restaurant_location and restaurant_location.phone_number %}
                <span>Phone Number : {{ restaurant_location.phone_number }}</span>
            {% endif %}

            <!--  Restaurant Location -->
            {% if restaurant_location %}
            <section id="location">
                <h2>Find Us</h2>
                <p>
                    {{ restaurant_location.address }},
                    {{ restaurant_location.city }},
                    {{ restaurant_location.state }} --{{ restaurant_location.zip_code }}
                </p>
            </section>
            {% else %}
                <p>Address not available</p>
            {% endif %}

            <!-- Search Bar -->
            <section>
                <h3>Search Menu</h3>
                <form method="get" action="">
                    <input type="text" name="q" placeholder="Search for menu items..." required>
                    <button type="submit">Search</button>
                </form>
                {% if query %}
                    <h4>Search Results for "{{ query }}"</h4>
                    {% if search_results %}
                        <ul>
                            {% for item in search_results %}
                                <li>
                                    <strong>{{ item.name }}</strong> - {{ item.description }} ({{ item.price }})
                                </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p>No results found.</p>
                    {% endif %}
                {% endif %}

            </section>

            <section id="location">
                <h2>Find Us</h2>
                <p>
                    {{ restaurant_location.address }},
                    {{ restaurant_location.city }},
                    {{ restaurant_location.state }} -
                    {{ restaurant_location.zip_code }}
                </p>    

                <!-- Embedded Google Map -->
                <div class="map-container">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3500.9985783276406!2d77.21672121508363!3d28.64480098241342!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x390cfd1f3a1a3f!2sConnaught%20Place%2C%20New%20Delhi!5e0!3m2!1sen!2sin!4v1610000000000!5m2!1sen!2sin"
                        width="600"
                        height="450"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy">
                    </iframe>
                </div>
            </section>

            <!--  Opening Hours Section -->
            <section id="opening-hours">
                <h2>Opening Hours</h2>
                <ul>
                    {% for day, hours in restaurant_location.opening_hours.items %}
                        <li><strong>{{ day }}:</strong> {{ hours }}</li>{% endfor %}
                </ul>
            </section>
        </main>

        <footer>
            <p>&copy; {{ year }} Shreya Restaurant. All Rights Reserved.</p>
            <p><strong>Opening Hours:</strong> Mon-Fri: 11am - 9pm | Sat-Sun: 10am - 10pm</p>
            <p>
                <a href="{% url 'privacy_policy' %}">Privacy Policy</a>
            </p>
        </footer>
    </body>
</html>